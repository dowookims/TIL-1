2019년 1월 29일 화요일

# 프로토타입

자바스크립트의 __모든 객체는 자신의 부모 역할을 하는 객체와 연결되어있다.__ 그리고 이것은 마치 객체지향의 상속 개념과 같이 부모 객체의 프로퍼티를 마치 자신의 것처럼 쓸 수 있는 것 같은 특징이 있다. 자바스크립트에서는 이런 부모 객체를 __프로토타입 객체__(짧게는 __프로토타입__)라고 부른다.

```javascript
var foo = {
    name: 'foo',
    age: 30
};
foo.toString();		// 1
console.dir(foo);	// 2
```

1. 객체 리터럴 방식으로 foo 객체를 생성하고, 이 객체의 `toString()` 메서드를 출력하였다. 그러나 예제에서 생성한 foo 객체에는 `toString()` 메서드가 없으므로 에러가 발생해야 하지만, 정상적으로 결과가 출력된다. 바로 __foo 객체의 프로토타입__에 `toString()` 메서드가 이미 정의되어 있고, foo 객체가 상속처럼 `toString()` 메서드를 호출했기 때문이다.
2. foo 객체를 출력해보자. 크롬 브라우저에서 예제를 실행시켜보면 객체 리터럴로 생성한 `name`과 `age` 프로퍼티 이외에도 foo 객체에 `__proto__` 프로퍼티가 있다는 것을 확인할 수 있다. 이 프로퍼티가 바로 앞서 설명한 foo 객체의 부모인 __프로토타입 객체__ 를 가리킨다.

ECMAScript 명세서에는 자바스크립트의 __모든 객체는 자신의 프로토타입을 가리키는 `[[Prototype]]`이라는 숨겨진 프로퍼티__ 를 가진다고 설명하고 있다. 크롬 브라우저에서는 `__proto__`가 바로 이 숨겨진 `[[Prototype]]` 프로퍼티를 의미한다. 즉, foo 객체는 자신의 부모 객체를 `__proto__`라는 내부 프로퍼티로 연결하고 있는 것이다.

모든 객체의 프로토타입은 자바스크립트의 룰에 따라 객체를 생성할 때 결정된다. 우선은 객체 리터럴 방식으로 생성된 객체의 경우 `Object.prototype` 객체가 프로토타입 객체가 된다는 것만 기억하고 넘어가자.

foo 객체의 `__proto__` 프로퍼티가 가리키는 객체가 바로 `Object.prototype` 이며, `toString()`, `valueOf()` 등과 같은 모든 객체에서 호출 가능한 자바스크립트 기본 내장 메서드가 포함되어 있다. 그 결과 foo 객체는 `foo.toString()`과 같이 자신의 프로토타입인 `Object.prototype` 객체에 포함된 다양한 메서드를 마치 자신의 프로퍼티인 것처럼 상속받아 사용할 수 있다.

`Object.prototype` 객체에 포함된 메서드들은 자바스크립트 표준 메서드로서 ECMAScript 명세서에 정의되어 있다.

또한, 객체를 생성할 때 결정된 프로토타입 객체는 임의의 다른 객체로 변경하는 것도 가능하다. 즉, 부모 객체를 동적으로 바꿀 수 있는 것이다. 자바스크립트에서는 이러한 특징을 활용해서 객체 상속 등의 기능을 구현한다.


출처 : 인사이드 자바스크립트 3.4. 프로토타입

